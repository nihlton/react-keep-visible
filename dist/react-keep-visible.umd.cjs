(function(o,e){typeof exports=="object"&&typeof module<"u"?module.exports=e(require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["react/jsx-runtime","react"],e):(o=typeof globalThis<"u"?globalThis:o||self,o["react-keep-visible"]=e(o.jsxRuntime,o.React))})(this,(function(o,e){"use strict";const S={height:"100%",display:"flex",flexDirection:"column"};return function(y){const T=e.useRef(null),f=e.useRef(null),g=e.useRef(null),r=e.useRef(-1),h=e.useRef(window.scrollY),{top:s="0",bottom:l="0"}=y;e.useEffect(()=>{const i=f.current;if((s||l)&&i){const t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.setProperty("height",s),t.style.setProperty("width",l),g.current=t,i.appendChild(t),()=>t.remove()}},[s,l]);const c=e.useCallback(()=>{const i=f.current,t=T.current,p=g.current;if(!i||!t)return;const x=t.getBoundingClientRect(),w=i.getBoundingClientRect(),d=p==null?void 0:p.getBoundingClientRect(),a=d?d.height:0,E=d?d.width:0,m=w.top-a,v=w.height+a+E,C=h.current>window.scrollY,R=h.current<window.scrollY,B=R&&r.current===1,I=C&&r.current===2,K=B||I,b=window.innerHeight,P=v<b,Y=m<b-v,j=m>0,_=!j&&!Y,O=j||Y;if(P){t.style.justifyContent="",i.style.position="sticky",i.style.top=s,i.style.bottom="";return}const n={},u={...S};K&&_&&(r.current=!1,u.justifyContent="",n.position="relative",n.top=w.top-x.top+"px",n.bottom=""),R&&O&&(r.current=2,u.justifyContent="flex-end",n.position="sticky",n.bottom=l,n.top=""),C&&O&&(r.current=1,u.justifyContent="",n.position="sticky",n.top=s,n.bottom=""),Object.assign(t.style,u),Object.assign(i.style,n),h.current=window.scrollY},[s,l]);return e.useEffect(()=>(window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c,{passive:!0}),c(),()=>{window.removeEventListener("scroll",c),window.removeEventListener("resize",c)}),[c]),o.jsx("div",{ref:T,style:{height:"100%"},children:o.jsx("div",{ref:f,children:y.children})})}}));
